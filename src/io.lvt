(mod assembly)
(use str)

(+label puts (do ; (*str)
  (sub r31 r31 16u)
  (str r31 r0 8) ; *str
  (str r31 r30 0) ; ret
  (strlen)
  (mov r2 r0)
  (ldr r30 r31 0) ; ret
  (ldr r1 r31 8) ; *str
  (add r31 r31 16u)
  (mov r0 1u)
  (int 1u)
))

(static char_buf 0u)

(+label putchar (do ; (char)
  (mov r1 r0)
  (ref char_buf)
  (str r0 r1 0)
  (mov r2 1u)
  (mov r1 r0)
  (mov r0 1u)
  (int 1u)
))
