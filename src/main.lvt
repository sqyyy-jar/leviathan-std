(mod assembly)
(use io)
(use str)
(use mem)

(static a "ABC")
(static b "ABC")

(-label main (do
  (_start)
  (ref a)
  (mov r1 r0)
  (mov r0 1024u)
  (alloc)
  (mov r8 r0)
  (strcpy)
  (mov r0 r8)
  (puts)
  (halt)
))

; setup stack
(-label _start (do
  (mov r0 1024u)
  (mul r0 r0 64u)
  (mov r31 r0)
  (int 2u)
  (add r31 r31 r0)
))
